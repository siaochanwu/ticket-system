#  Fastify 高流量搶票系統 — 完整架構設計

## 目錄

1. [系統架構總覽](#一系統架構總覽)
2. [專案目錄結構](#二專案目錄結構)


---

## 一、系統架構總覽

```
                            ┌─────────────────┐
                            │   CloudFlare    │
                            │   CDN + WAF     │
                            └────────┬────────┘
                                     │
                            ┌────────▼────────┐
                            │     Nginx       │
                            │  Load Balancer  │
                            └────────┬────────┘
                                     │
              ┌──────────────────────┼──────────────────────┐
              │                      │                      │
     ┌────────▼────────┐   ┌────────▼────────┐   ┌────────▼────────┐
     │ Fastify Node 1  │   │ Fastify Node 2  │   │ Fastify Node N  │
     └────────┬────────┘   └────────┬────────┘   └────────┬────────┘
              │                      │                      │
              └──────────────────────┼──────────────────────┘
                                     │
        ┌────────────────────────────┼────────────────────────────┐
        │                            │                            │
┌───────▼───────┐          ┌─────────▼─────────┐         ┌───────▼───────┐
│ Redis Cluster │          │    RabbitMQ /     │         │  PostgreSQL   │
│ • 庫存快取     │          │      Kafka        │         │  • 主從複製    │
│ • 分散式鎖     │          │ • 訂單處理         │         │  • 讀寫分離    │
│ • 排隊系統     │          │ • 通知推送         │         │               │
│ • Session     │          │ • 超時檢查         │         │               │
└───────────────┘          └───────────────────┘         └───────────────┘
```

### 技術選型

| 層級 | 技術 | 用途 |
|------|------|------|
| Web Framework | Fastify | 高效能 Node.js 框架 |
| Database | PostgreSQL | 主要資料儲存 |
| Cache / Lock | Redis | 快取、分散式鎖、排隊系統 |
| Message Queue | RabbitMQ | 非同步任務處理 |
| Load Balancer | Nginx | 負載均衡、限流 |

---